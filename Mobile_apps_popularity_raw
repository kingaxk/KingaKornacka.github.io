{
 "cells": [
  {
   "cell_type": "markdown",
   "id": "e1a61103-bf7c-4141-9c66-ffbfda490097",
   "metadata": {},
   "source": [
    "# Most popular apps in Google Play Store and Apple Store\n",
    "Project goal is to find inspiration for development of the new app - one that will generate relatively big profit, based on the market demand.\n",
    "\n",
    "Given that all apps developed by company requesting this analysis are free to download and targeted at English-speaking audience, we will look at this category only.\n",
    "\n",
    "**We are be focusing on number of downloads and reviews** as best available indicator of market demand and we will dive deeper into **most poplar Generes.**\n",
    "\n",
    "Available data:\n",
    "* 10,000 Android apps from Google Play - collected in August 2018\n",
    "* 7,000 iOS apps from the App Store - collected in July 2017\n",
    "\n",
    "## Process:\n",
    "1. Data review\n",
    "2. Data cleaning\n",
    "      * removing rows with lacking data and duplicates\n",
    "      * keeping only targeted apps category - free and for English-speaking audience\n",
    "3. Analysis of most popular app categories and their ratings "
   ]
  },
  {
   "cell_type": "markdown",
   "id": "e95f6bf9-6c53-4801-9b09-d9e54e398b3f",
   "metadata": {},
   "source": [
    "## 1. Data review"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "71bea866-4c28-4fc7-a447-f6f1790c1e7f",
   "metadata": {},
   "outputs": [],
   "source": [
    "import pandas as pd\n",
    "\n",
    "def data_types(dataset):\n",
    "    dt_data_type = dataset.dtypes.to_dict()\n",
    "    for key in dt_data_type:\n",
    "        print(key, \": \", dt_data_type[key])\n",
    "    print (\"\\n\")\n",
    "    print(dataset.head())\n",
    "    print (\"\\n\")\n",
    "    print (\"\\n\")\n",
    "\n",
    "AppleStore = pd.read_csv(\"c:\\\\Users\\\\kinga\\\\python\\\\tutorial_datasets\\\\AppleStore.csv\", encoding=\"utf8\")\n",
    "data_types(AppleStore)\n",
    "\n",
    "GooglePlayStore = pd.read_csv(\"c:\\\\Users\\\\kinga\\\\python\\\\tutorial_datasets\\\\googleplaystore.csv\", encoding=\"utf8\")\n",
    "data_types(GooglePlayStore)"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "fb121e6a-2863-4f2a-87e8-d175b27789d2",
   "metadata": {},
   "source": [
    "## 2. Data cleaning"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "2a161972-7e24-4668-b049-57389073bcb4",
   "metadata": {},
   "outputs": [],
   "source": [
    "# lack of data identified at data source - on https://www.kaggle.com/datasets/lava18/google-play-store-apps/discussion/164101\n",
    "\n",
    "print(GooglePlayStore.loc[10472])\n",
    "GooglePlayStore = GooglePlayStore.drop(10472)"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "233f28e6-728d-4165-9d08-ab936e192641",
   "metadata": {},
   "outputs": [],
   "source": [
    "#checking for duplicated app rows\n",
    "\n",
    "print('Liczba duplikatów w zbiorze Google Play Store:', GooglePlayStore.duplicated(subset=GooglePlayStore.columns[0]).sum())\n",
    "print('Liczba duplikatów w zbiorze Apple Store:', AppleStore.duplicated(subset=AppleStore.columns[0]).sum())"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "8ab25479-4415-47b8-b6db-3145bb76e37f",
   "metadata": {},
   "outputs": [],
   "source": [
    "# leaving most recent entries - with the biggest number of reviews\n",
    "\n",
    "print(len(GooglePlayStore))\n",
    "GooglePlayStore = GooglePlayStore.sort_values(by='Reviews', ascending=False)\n",
    "GooglePlayStore = GooglePlayStore.drop_duplicates(subset=GooglePlayStore.columns[0], keep='first')\n",
    "print(len(GooglePlayStore))\n",
    "print(len(AppleStore))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "5c497d79-4823-43ec-a226-824cff587644",
   "metadata": {},
   "outputs": [],
   "source": [
    "# keeping only apps for English audience - remove apps with more than 3 characters that are not commonly used in english alphabet [ outside of 0-127 ASCII code ] in their names\n",
    "\n",
    "def if_english(string):\n",
    "    non_eng_char = 0\n",
    "    for char in string:\n",
    "        if ord(char) > 127:\n",
    "            non_eng_char += 1\n",
    "    if non_eng_char <3:\n",
    "        return True\n",
    "    else:\n",
    "        return False\n",
    "\n",
    "GooglePlayStore = GooglePlayStore[GooglePlayStore.iloc[:, 0].apply(if_english)]\n",
    "AppleStore = AppleStore[AppleStore.iloc[:, 1].apply(if_english)]\n",
    "        \n",
    "print(len(GooglePlayStore))\n",
    "print(len(AppleStore))"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "c8954b35-4243-423c-9616-cf4026fe1316",
   "metadata": {},
   "outputs": [],
   "source": [
    "# only free apps\n",
    "\n",
    "#print(GooglePlayStore.iloc[:, 7].dtype)\n",
    "print(GooglePlayStore.iloc[:, 7])\n",
    "GooglePlayStore = GooglePlayStore[GooglePlayStore.iloc[:, 7] == '0']\n",
    "print(len(GooglePlayStore))\n",
    "\n",
    "#print(AppleStore.iloc[:, 4].dtype)\n",
    "print(AppleStore.iloc[:, 4])\n",
    "AppleStore = AppleStore[AppleStore.iloc[:, 4] == 0.0]\n",
    "print(len(AppleStore))"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "24da7629-22d1-4685-a635-2c14a0569446",
   "metadata": {},
   "source": [
    "## 3. Analysis of most popular categories & average app ratings"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "32f12c21-1831-40a6-8d3b-bc16a568c791",
   "metadata": {},
   "outputs": [],
   "source": [
    "# Frequency tables for the prime_genre column of the App Store data set, and the Genres and Category columns of the Google Play data set.\n",
    "\n",
    "#1st way\n",
    "def freq(dataset, column):\n",
    "    freq = {}\n",
    "    for data in dataset[column]:\n",
    "        if data in freq:\n",
    "            freq[data] += 1\n",
    "        else:\n",
    "            freq[data] = 1\n",
    "    # sorting\n",
    "    freq = dict(sorted(freq.items(), key=lambda item: item[1], reverse=True))\n",
    "    return freq\n",
    "        \n",
    "GoogleStore_Genres = freq(GooglePlayStore, 'Genres')\n",
    "GoogleStore_Category = freq(GooglePlayStore,'Category')\n",
    "AppleStore_Genres = freq(AppleStore, 'prime_genre')\n",
    "\n",
    "print(list(GoogleStore_Genres.items())[:4])\n",
    "print(list(GoogleStore_Category.items())[:4])\n",
    "print(list(AppleStore_Genres.items())[:4])"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "e9ae0826-9f99-4d50-b900-13b6042e322e",
   "metadata": {},
   "outputs": [],
   "source": [
    "#2nd way, with option to present data in procenatges values\n",
    "\n",
    "def freq(dataset, column, procentages=True):\n",
    "    freq = {}\n",
    "    uniques = dataset[column].unique()\n",
    "    if procentages:\n",
    "        for one_uni in uniques:\n",
    "            freq[one_uni] = round((len(dataset[dataset[column] == one_uni]) / len(dataset[column])*100),2)\n",
    "    else:\n",
    "        for one_uni in uniques:\n",
    "            freq[one_uni] = len(dataset[dataset[column] == one_uni])\n",
    "    # sorting, descending\n",
    "    freq = dict(sorted(freq.items(), key=lambda item: item[1], reverse=True))\n",
    "    return freq\n",
    "        \n",
    "GoogleStore_Genres = freq(GooglePlayStore, 'Genres')\n",
    "GoogleStore_Category = freq(GooglePlayStore,'Category')\n",
    "AppleStore_Genres = freq(AppleStore, 'prime_genre')\n",
    "\n",
    "print(list(GoogleStore_Genres.items())[:4])\n",
    "print(list(GoogleStore_Category.items())[:4])\n",
    "print(list(AppleStore_Genres.items())[:4])"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "f89e6ac4-e0ec-4630-945a-089f68a7ea70",
   "metadata": {},
   "source": [
    "## Conclusions\n",
    "\n",
    "The most popular apps in **GooglePlayStore** are classified as:\n",
    "belonging to *Category*:\n",
    "* Family - 19,0%\n",
    "* Game - 9,7%\n",
    "* Education - 5,4%\n",
    "\n",
    "and based on *Genres*, the most pupular are:\n",
    "* Tools - 8,4%\n",
    "* Entertainment - 6,1%\n",
    "* Education - 5,4%\n",
    "\n",
    "When it comes to **AppleStore**, most popular *Categories* are:\n",
    "* Games - 58,3%\n",
    "* Entertainment - 7,8%\n",
    "* Photo&Video - 5%"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "8df7bc26-038f-43bc-9b02-b66825213ae0",
   "metadata": {},
   "source": [
    "Based on these findings we found out what are the most common apps in the AppleStore and GooglePlayStore.\n",
    "\n",
    "These findings tell us more about ***competitivness of the market*** - and how many apps we will compete with - rather than how many people were interested in them.\n",
    "\n",
    "\n",
    "Based on that we can see that **Games are very popular choice for developers, taking 58,3% of space in free, English-based apps sector in Apple Store**.\n",
    "\n",
    "At first glance the numbers don't look so impressive for **Goole Play Store, with Games and Entertainment ranked as second, occupying 9,7% of Category and 6,1% Genre** of the space respectively. However, a brief qualitative analysis reveals that many apps in the Family category are also games designed for children.\n",
    "\n",
    "Overall, we can conclude that the largest group of games is focused on ***fun and entertainment***."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "97c82fd3-9126-40da-8e7c-55ecfed5ed6e",
   "metadata": {},
   "source": [
    "To make sure that we look at ***actual demand and analyze users attraction***, we wanted to focus on `number of installs`. Unfortunately this variable is not provicded in AplleStore dataset, and due to that we needed to replace it with `rating count`.\n",
    "\n",
    "To make sure that these app are not only installed but liked and used over time, we also conducted analysis for `rating` itself.\n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "b97bf44f-f61b-4dfa-a5cd-86c13c0608c1",
   "metadata": {},
   "outputs": [],
   "source": [
    "def attract(dataset, grouping, how_much, rating):\n",
    "    popularity = dataset.groupby(grouping)[[how_much]].mean()\n",
    "    rating = dataset.groupby(grouping)[[rating]].mean()\n",
    "    attract = pd.concat([popularity, rating], axis=1)\n",
    "    return attract\n",
    "\n",
    "# we need to refine Installs data for GooglePlayStore prezentation to be able to aggregate the data\n",
    "GooglePlayStore['Installs'] = GooglePlayStore['Installs'].str.replace(\",\", \"\").str.replace(\"+\", \"\").astype(int)\n",
    "\n",
    "GoogleStore_Category_attract = attract(GooglePlayStore, 'Category', 'Installs', 'Rating')\n",
    "GoogleStore_Genres_attract = attract(GooglePlayStore, 'Genres', 'Installs', 'Rating')\n",
    "print('Most often installed apps Category from Google Play Store:', GoogleStore_Category_attract.sort_values(by='Installs', ascending=False)[:4], '\\n')\n",
    "print('Best rated apps Category from Google Play Store:', GoogleStore_Category_attract.sort_values(by='Rating', ascending=False)[:4], '\\n')\n",
    "print('Most often installed apps Genre from Google Play Store:', GoogleStore_Genres_attract.sort_values(by='Installs', ascending=False)[:4], '\\n')\n",
    "print('Best rated apps Genre from Google Play Store:', GoogleStore_Genres_attract.sort_values(by='Rating', ascending=False)[:4], '\\n')"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": null,
   "id": "e50fdb57-d7b6-43d2-83e8-7dd7e919ac74",
   "metadata": {},
   "outputs": [],
   "source": [
    "AppleStore_attract = attract(AppleStore, 'prime_genre', 'rating_count_tot', 'user_rating')\n",
    "print('Most often rated apps Genre from Apple Store:', AppleStore_attract.sort_values(by='rating_count_tot', ascending=False)[:4], '\\n')\n",
    "print('Best rated apps Genre from Apple Store:', AppleStore_attract.sort_values(by='user_rating', ascending=False)[:4], '\\n')"
   ]
  },
  {
   "cell_type": "markdown",
   "id": "c693eff2-2b10-48c8-a5dc-7110502175c5",
   "metadata": {},
   "source": [
    "Based on these new findings, we can conclude that **Google Play Store customers prefer apps that help them connect with others** -apps in the Communication category are installed on average by the largest audience, and Social apps are ranked third in this context. Another potential direction to explore involves Video Players and Photography apps, which ranked second and fourth, respectively. Additionally, the **Book category stands out among the highest-rated apps.**\n",
    "\n",
    "In the **Apple Store**, navigation apps are the most frequently rated, but their average ratings are relatively low. **Music apps are quite popular and tend to receive high ratings.** Besides that, social apps also have a strong presence, ranking third in terms of average number of ratings."
   ]
  },
  {
   "cell_type": "markdown",
   "id": "95bbe2d6-ab07-40fe-bc58-45dfb07718e2",
   "metadata": {},
   "source": [
    "# Recommendations\n",
    "\n",
    "*New app direction proposition:* \n",
    "**A gaming app based on book themes, enriched with soundtracks, and featuring elements of gamification and social interaction.**\n"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.12.4"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 5
}
